"use strict";(self.webpackChunkreact_lesson=self.webpackChunkreact_lesson||[]).push([[6],{3013:(t,s,e)=>{e.r(s),e.d(s,{default:()=>d});var a=e(9379),i=e(5043),l=e(3473),n=e(1552),o=e(6403),c=e(579);class h extends i.Component{constructor(t){super(t),this.state={isPopUpOpen:!0,data:[],edit_calculator:NaN,edit_index:NaN,choosen:!1},this.addCalculator=this.addCalculator.bind(this),this.deleteRow=this.deleteRow.bind(this),this.copyRow=this.copyRow.bind(this),this.closeCurrentCalculator=this.closeCurrentCalculator.bind(this),this.backbutton=this.backbutton.bind(this),this.setValuesToCalculator=this.setValuesToCalculator.bind(this),this.EditCalculatorWindow=this.EditCalculatorWindow.bind(this),this.MainTable=this.MainTable.bind(this),this.ResultsTable=this.ResultsTable.bind(this),this.ControlPanel=this.ControlPanel.bind(this),this.Buttons=this.Buttons.bind(this),this.send_data=this.send_data.bind(this)}addCalculator(t,s){this.setState({isPopUpOpen:!1});const{data:e}=this.state,i=[...e,{item:t,options:s,values:(0,a.A)({},t.default_values)}];this.setState({data:i},(()=>{const t=this.state.data.length-1;this.setState({edit_calculator:this.state.data[t],edit_index:t})}))}deleteRow(t){const{data:s}=this.state;s.splice(t,1),this.setState({data:s})}copyRow(t){const{data:s}=this.state,e=[...s,(0,a.A)({},s[t])];this.setState({data:e,choosen:e.length-1})}closeCurrentCalculator(){this.setState({edit_calculator:NaN,edit_index:NaN})}backbutton(){return(0,c.jsx)("div",{className:"backbutton",onClick:this.closeCurrentCalculator,children:(0,c.jsx)("i",{className:"fas fa-arrow-left"})})}setValuesToCalculator(t){console.log(t);const{data:s}=this.state;s[this.state.edit_index].values=t,this.setState({data:s})}send_data(){let t={pipes:[],lists:[],balks:[]};this.state.data.forEach((s=>{"\u0422\u0440\u0443\u0431\u0430"===s.values.name?t.pipes.push(s.values):"\u0411\u0430\u043b\u043a\u0430"===s.values.name?t.balks.push(s.values):"\u041b\u0438\u0441\u0442"===s.values.name&&t.lists.push(s.values)})),console.log(t);try{const s=o.A.post("http://127.0.0.1:8000/api/add_order",t);console.log("\u0423\u0441\u043f\u0435\u0448\u043d\u043e:",s.data)}catch(s){console.error("\u041e\u0448\u0438\u0431\u043a\u0430:",s)}}EditCalculatorWindow(){const{edit_calculator:t}=this.state;return(0,c.jsxs)("div",{children:[(0,c.jsx)(this.backbutton,{}),(0,c.jsx)(t.item.calculator,{options:t.options,values:t.values,setValues:this.setValuesToCalculator,additional_inputs:!0})]})}MainTable(){const{data:t}=this.state;return(0,c.jsx)("div",{className:"table-container",children:(0,c.jsxs)("table",{children:[(0,c.jsx)("thead",{className:"fixed",children:(0,c.jsxs)("tr",{children:[(0,c.jsx)("th",{children:"\u2116"}),(0,c.jsx)("th",{children:"\u041f\u043e\u0437\u0438\u0446\u0438\u044f"})]})}),(0,c.jsx)("tbody",{children:t.map(((t,s)=>(0,c.jsxs)("tr",{style:{backgroundColor:this.state.choosen===s?"#ff6968":"",color:this.state.choosen===s?"white":"black"},onClick:()=>{this.setState({choosen:s})},children:[(0,c.jsx)("th",{children:s+1}),(0,c.jsx)("th",{children:t.values.display_name})]},s)))})]})})}ResultsTable(){const{data:t}=this.state;return(0,c.jsxs)("table",{className:"result",children:[(0,c.jsx)("thead",{style:{backgroundColor:"#ff8f6166"},children:(0,c.jsxs)("tr",{children:[(0,c.jsx)("th",{children:"\u041c\u0430\u0441\u0441\u0430 (\u043a\u0433)"}),(0,c.jsx)("th",{children:"\u0414\u043b\u0438\u043d\u0430 (\u043c)"}),(0,c.jsx)("th",{children:"\u0426\u0435\u043d\u0430 (\u20bd)"})]})}),(0,c.jsx)("tbody",{children:(0,c.jsxs)("tr",{children:[(0,c.jsx)("th",{children:parseFloat(t.reduce((function(t,s){return t+s.values.massa}),0).toFixed(4))}),(0,c.jsx)("th",{children:parseFloat(t.reduce((function(t,s){return t+s.values.l}),0).toFixed(4))}),(0,c.jsx)("th",{children:parseFloat(t.reduce((function(t,s){return t+s.values.price}),0).toFixed(2))})]})})]})}ControlPanel(){const{data:t}=this.state;if(!1!==this.state.choosen)return(0,c.jsxs)("div",{className:"control_panel",children:[(0,c.jsx)("i",{className:"fas fa-edit",onClick:()=>{this.setState({edit_calculator:t[this.state.choosen],edit_index:this.state.choosen})}}),(0,c.jsx)("i",{className:"fa-regular fa-copy",onClick:()=>{this.copyRow(this.state.choosen)}}),(0,c.jsx)("i",{className:"fas fa-trash",onClick:()=>{this.deleteRow(this.state.choosen),this.setState({choosen:!1})}})]})}Buttons(){return(0,c.jsxs)("div",{className:"Buttons",children:[(0,c.jsx)("div",{onClick:this.send_data,style:{backgroundColor:"#7b55ff"},children:(0,c.jsx)("p",{children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"})}),(0,c.jsx)("div",{onClick:()=>{this.setState({isPopUpOpen:!0})},style:{backgroundColor:"#09749e"},children:(0,c.jsx)("p",{children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c"})})]})}render(){const{edit_calculator:t}=this.state;return t?(0,c.jsx)(this.EditCalculatorWindow,{}):(0,c.jsxs)("div",{children:[(0,c.jsxs)("div",{className:"LengthMap",children:[(0,c.jsx)("h2",{children:"\u041a\u0430\u0440\u0442\u0430 \u0414\u043b\u0438\u043d"}),(0,c.jsxs)("div",{className:"main",children:[(0,c.jsx)(this.MainTable,{}),(0,c.jsx)(this.ResultsTable,{})]}),(0,c.jsx)(this.ControlPanel,{}),(0,c.jsx)(this.Buttons,{})]}),(0,c.jsx)(l.A,{closeFun:()=>{this.setState({isPopUpOpen:!1})},trigger:this.state.isPopUpOpen,column:!0,children:(0,c.jsx)(n.A,{setCalculator:this.addCalculator})})]})}}const d=h}}]);
//# sourceMappingURL=6.61da72b0.chunk.js.map